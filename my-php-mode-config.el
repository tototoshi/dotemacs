(require 'php-mode)

(defun my-php-toggle-var-dump ()
  (interactive)
  (save-excursion
    (beginning-of-line)
    (cond ((re-search-forward "var_dump" (point-at-eol) t)
           (indent-for-tab-command)
           (delete-backward-char 8)
           (delete-char 1)
           (end-of-line)
           (delete-backward-char 2)
           (insert ";"))
          (t (indent-for-tab-command)
             (insert "var_dump(")
             (end-of-line)
             (if (= (char-before) ?\;)
                 (delete-backward-char 1))
             (insert ");")))))

(add-hook 'php-mode-hook
          '(lambda ()
             (setq php-mode-force-pear t)
             ;; (flymake-mode t)
             (gtags-mode 1)
             (c-set-style "stroustrup")
             (c-set-offset 'comment-intro 0)
             (setq tab-width 4)
             (setq-default tab-width 4)
             (setq c-tab-width 4)
             (setq c-basic-offset 4)
             (hs-minor-mode t)
             (add-to-list 'ac-sources 'ac-php-func-source)
             (define-key php-mode-map "\"" 'electric-pair)
             (define-key php-mode-map "\'" 'electric-pair)
             (define-key php-mode-map "(" 'electric-pair)
             (define-key php-mode-map "[" 'electric-pair)
             (define-key php-mode-map "{" 'electric-pair)
             (define-key php-mode-map (kbd "C-c v") 'my-php-toggle-var-dump)
             ))
